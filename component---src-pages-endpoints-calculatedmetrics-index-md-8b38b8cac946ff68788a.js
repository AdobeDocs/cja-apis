"use strict";(self.webpackChunkcja_apis=self.webpackChunkcja_apis||[]).push([[2828],{16022:function(e,n,t){t.r(n),t.d(n,{_frontmatter:function(){return s},default:function(){return h}});var a=t(87462),r=t(63366),o=(t(15007),t(64983)),i=t(91515),d=["components"],s={},l=function(e){return function(n){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,o.mdx)("div",n)}},c=l("InlineAlert"),m=l("CodeBlock"),p={_frontmatter:s},u=i.Z;function h(e){var n=e.components,t=(0,r.Z)(e,d);return(0,o.mdx)(u,(0,a.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,o.mdx)("h1",{id:"calculated-metrics"},"Calculated metrics"),(0,o.mdx)("p",null,"The Calculated metrics APIs allow you to retrieve, update, or create calculated metrics programmatically through Adobe Developer. The APIs use the same data and methods that are used when working with calculated metrics in the UI. See ",(0,o.mdx)("a",{parentName:"p",href:"https://experienceleague.adobe.com/docs/analytics-platform/using/cja-components/cja-calcmetrics/calc-metr-overview.html"},"Calculated metrics overview")," in the CJA documentation for more information."),(0,o.mdx)("p",null,"You can call the ",(0,o.mdx)("inlineCode",{parentName:"p"},"/calculatedmetrics/")," endpoint to add, edit or delete calculated metrics."),(0,o.mdx)(c,{variant:"info",slots:"text",mdxType:"InlineAlert"}),(0,o.mdx)("p",null,"Adobe may add optional request and response members (name/value pairs) to existing API objects at any time and without notice or changes in versioning. Adobe recommends that you refer to the API documentation of any third-party tool you integrate with our APIs so that such additions are ignored in processing if not understood. If implemented properly, such additions are non-breaking changes for your implementation. Adobe will not remove parameters or add required parameters without first providing standard notification through release notes."),(0,o.mdx)("h2",{id:"retrieve-a-list-of-calculated-metrics"},"Retrieve a list of calculated metrics"),(0,o.mdx)("p",null,"In CJA, you can navigate to ",(0,o.mdx)("strong",{parentName:"p"},"Components")," > ",(0,o.mdx)("strong",{parentName:"p"},"Calculated metrics")," and see a list of calculated metrics that you created or others have shared. This call is helpful to identify the ID's of desired calculated metrics."),(0,o.mdx)("p",null,(0,o.mdx)("inlineCode",{parentName:"p"},"GET https://cja.adobe.io/calculatedmetrics")),(0,o.mdx)("p",null,"For example, get a response of all calculated metrics shared with the user."),(0,o.mdx)(m,{slots:"heading, code",repeat:"2",languages:"CURL,JSON",mdxType:"CodeBlock"}),(0,o.mdx)("h4",{id:"request"},"Request"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-sh"},'curl -X GET "https://cja.adobe.io/calculatedmetrics?includeType=shared" \\\n    -H "x-api-key: {CLIENTID}" \\\n    -H "x-gw-ims-org-id: {IMSORG}" \\\n    -H "Authorization: Bearer {ACCESSTOKEN}"\n')),(0,o.mdx)("h4",{id:"response"},"Response"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-json"},'{\n    "content": [\n        {\n            "dataId": "vrs_exampledataid",\n            "id": "a5066209",\n            "name": "POS Orders Participation",\n            "description": "",\n            "owner": {\n                "imsUserId": "EXAMPLE@AdobeID",\n                "ownerId": "EXAMPLE@AdobeID",\n                "name": null,\n                "type": "imsUser"\n            },\n            "polarity": "positive",\n            "precision": 0,\n            "type": "decimal"\n        },\n        {\n            "dataId": "vrs_exampledataid",\n            "id": "16458967",\n            "name": "Online Orders",\n            "description": "",\n            "owner": {\n                "imsUserId": "EXAMPLE@AdobeID",\n                "ownerId": "EXAMPLE@AdobeID",\n                "name": null,\n                "type": "imsUser"\n            },\n            "polarity": "positive",\n            "precision": 0,\n            "type": "decimal"\n        }\n    ],\n    "totalPages": 1,\n    "totalElements": 2,\n    "number": 0,\n    "numberOfElements": 2,\n    "firstPage": true,\n    "lastPage": true,\n    "sort": null,\n    "size": 2\n}\n')),(0,o.mdx)("h3",{id:"find-components-that-use-a-specified-calculated-metric"},"Find components that use a specified calculated metric"),(0,o.mdx)("p",null,"To retrieve a list of components that contain a specified calculated metric, include the ",(0,o.mdx)("inlineCode",{parentName:"p"},"usedIn")," expansion parameter in your metrics request."),(0,o.mdx)("p",null,"The following example shows a list components that include the ",(0,o.mdx)("inlineCode",{parentName:"p"},"conversion rate"),", as provided for the value for the ",(0,o.mdx)("inlineCode",{parentName:"p"},"usedIn")," expansion parametr. Note that the details for components ",(0,o.mdx)("inlineCode",{parentName:"p"},"4444")," and ",(0,o.mdx)("inlineCode",{parentName:"p"},"5555")," are returned:"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-json"},'{\n    "content": [\n        {\n            "name": "conversion rate",\n            "description": "Example channel segment",\n            "organization": "77717@ExampleOrg",\n            "recentRecordedAccess": "YYYY-06-05T13:40:31Z",\n            "performanceScore": "2.14",\n            "id": "s44444444@ExampleOrg_44444444",\n            "usedIn": [\n                {\n                    "componentId": "4444",\n                    "componentType": "project",\n                    "subType": "project",\n                    "internal": false,\n                    "name": "Example Customer Analysis",\n                    "lastRecordedAccess": 7777775200236\n                },\n                {\n                    "componentId": "5555",\n                    "componentType": "project",\n                    "subType": "project",\n                    "internal": false,\n                    "name": "Example Traffic",\n                    "lastRecordedAccess": 7777776824296\n                },\n               \n            ],\n            "usageSummary": {\n                "count": 0,\n                "mostRecentTimestamp": null,\n                "itemId": null\n            },\n            "owner": {\n                "imsUserId": "7777777777.e",\n                "ownerId": "777777777@7777777777.e",\n                "name": null,\n                "type": "imsUser"\n            },\n            "dataId": null\n        }\n    ],\n    "totalElements": 2,\n    "totalPages": 1,\n    "numberOfElements": 1,\n    "number": 0,\n    "firstPage": true,\n    "lastPage": true,\n    "sort": null,\n}\n')),(0,o.mdx)("h2",{id:"retrieve-a-single-calculated-metric"},"Retrieve a single calculated metric"),(0,o.mdx)("p",null,"Once you have the desired ID, you can append the ID to the call to retrieve details on a single calculated metric:"),(0,o.mdx)("p",null,(0,o.mdx)("inlineCode",{parentName:"p"},"GET https://cja.adobe.io/calculatedmetrics/{id}")),(0,o.mdx)("p",null,"For example, get details around the calculated metric with an ID of ",(0,o.mdx)("inlineCode",{parentName:"p"},"a5066209"),":"),(0,o.mdx)(m,{slots:"heading, code",repeat:"2",languages:"CURL,JSON",mdxType:"CodeBlock"}),(0,o.mdx)("h4",{id:"request-1"},"Request"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-sh"},'curl -X GET "https://cja.adobe.io/calculatedmetrics/a5066209" \\\n    -H "x-api-key: {CLIENTID}" \\\n    -H "x-gw-ims-org-id: {IMSORG}" \\\n    -H "Authorization: Bearer {ACCESSTOKEN}"\n')),(0,o.mdx)("h4",{id:"response-1"},"Response"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-json"},'{\n    "dataId": "vrs_exampledataid",\n    "id": "a5066209",\n    "name": "POS Orders Participation",\n    "description": "",\n    "owner": {\n        "imsUserId": "EXAMPLE@AdobeID",\n        "ownerId": "EXAMPLE@AdobeID",\n        "name": null,\n        "type": "imsUser"\n    },\n    "polarity": "positive",\n    "precision": 0,\n    "type": "decimal"\n}\n')),(0,o.mdx)("h2",{id:"create-a-calculated-metric"},"Create a calculated metric"),(0,o.mdx)("p",null,"Create a calculated metric with the desired definition for use in reporting."),(0,o.mdx)("p",null,(0,o.mdx)("inlineCode",{parentName:"p"},"POST https://cja.adobe.io/calculatedmetrics")),(0,o.mdx)("p",null,"For example, create a basic calculated metric that divides visits by visitors:"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-json"},'{\n    "name": "Integration Test 1",\n    "description": "Integration Test 1 Description",\n    "dataId": "{DATAID}",\n    "type": "percent",\n    "definition": {\n        "func": "calc-metric",\n        "formula": {\n            "func": "divide",\n            "col1": {\n                "func": "metric",\n                "name": "metrics\\/visits"\n            },\n            "col2": {\n                "func": "metric",\n                "name": "metrics\\/visitors"\n            }\n        },\n        "version": [\n            1,\n            0,\n            0\n        ]\n    }\n}\n')),(0,o.mdx)("h2",{id:"api-status-codes"},"API status codes"),(0,o.mdx)("p",null,"For a description of API status codes and tips for troubleshooting, see the ",(0,o.mdx)("a",{parentName:"p",href:"https://experienceleague.adobe.com/docs/experience-platform/landing/troubleshooting.html#api-status-codes"},"Platform FAQ and troubleshooting guide"),"."))}h.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-endpoints-calculatedmetrics-index-md-8b38b8cac946ff68788a.js.map